[gd_scene load_steps=10 format=3 uid="uid://b4xojb6sb1hqf"]

[ext_resource type="Script" uid="uid://cnwk5jgcw7ohq" path="res://assets/gun/gun.gd" id="1_danae"]
[ext_resource type="AudioStream" uid="uid://vbrkdpe3hak1" path="res://assets/gun/audio/laserSmall_000.ogg" id="2_nrmjy"]
[ext_resource type="Script" path="res://assets/gun/fire_audio.gd" id="3_40bau"]
[ext_resource type="AudioStream" uid="uid://g0rtfmhdovhd" path="res://assets/gun/audio/impactSoft_medium_000.ogg" id="4_7ybdq"]
[ext_resource type="PackedScene" uid="uid://bsd0pjrvu51lx" path="res://assets/gun/weapon.glb" id="5_idm4r"]

[sub_resource type="Animation" id="Animation_7ybdq"]
length = 0.001

[sub_resource type="Animation" id="Animation_nrmjy"]
resource_name = "melee"
length = 0.6

[sub_resource type="Animation" id="Animation_danae"]
resource_name = "reload"
length = 1.7

[sub_resource type="AnimationLibrary" id="AnimationLibrary_7ybdq"]
_data = {
&"RESET": SubResource("Animation_7ybdq"),
&"melee": SubResource("Animation_nrmjy"),
&"reload": SubResource("Animation_danae")
}

[node name="Gun" type="Node3D"]
script = ExtResource("1_danae")

[node name="FireTimer" type="Timer" parent="."]

[node name="Animations" type="AnimationPlayer" parent="."]
libraries = {
&"": SubResource("AnimationLibrary_7ybdq")
}

[node name="FireAudio" type="AudioStreamPlayer" parent="."]
stream = ExtResource("2_nrmjy")
volume_db = -25.0
script = ExtResource("3_40bau")

[node name="HitAudio" type="AudioStreamPlayer" parent="."]
stream = ExtResource("4_7ybdq")
volume_db = -18.0
max_polyphony = 3

[node name="GunMesh" parent="." instance=ExtResource("5_idm4r")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -0.189222)

[node name="BulletSpawner" type="Node3D" parent="GunMesh"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -3.08448e-08, 0, -0.222181)

[connection signal="fired" from="." to="FireAudio" method="_on_gun_fired"]
[connection signal="timeout" from="FireTimer" to="." method="_on_timer_timeout"]
[connection signal="animation_finished" from="Animations" to="." method="_on_animations_animation_finished"]
