[gd_scene load_steps=16 format=3 uid="uid://b4xojb6sb1hqf"]

[ext_resource type="Script" uid="uid://cnwk5jgcw7ohq" path="res://assets/gun/gun.gd" id="1_danae"]
[ext_resource type="AudioStream" uid="uid://dkpf12ixnykxh" path="res://assets/gun/audio/Sci-Fi Gun 1-1.ogg" id="2_sqgpk"]
[ext_resource type="Script" uid="uid://c7ichshympetk" path="res://assets/gun/fire_audio.gd" id="3_40bau"]
[ext_resource type="AudioStream" uid="uid://g0rtfmhdovhd" path="res://assets/gun/audio/impactSoft_medium_000.ogg" id="4_7ybdq"]
[ext_resource type="PackedScene" uid="uid://bsd0pjrvu51lx" path="res://assets/gun/weapon.glb" id="5_idm4r"]
[ext_resource type="AudioStream" uid="uid://b7ybuden14w8r" path="res://assets/gun/audio/Sci-Fi Gun 1 Reload_Begin.ogg" id="5_sqgpk"]
[ext_resource type="Script" uid="uid://dq7v65xnv6mge" path="res://assets/common/audio/pitch_randomizer.gd" id="6_sqgpk"]
[ext_resource type="AudioStream" uid="uid://djmjmt11cg4pj" path="res://assets/gun/audio/Sci-Fi Gun 1 Reload_Finished.ogg" id="7_ae13x"]

[sub_resource type="Animation" id="Animation_7ybdq"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("GunMesh:position")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector3(0, 0, -0.189222)]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("GunMesh:rotation")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector3(0, 0, 0)]
}

[sub_resource type="Animation" id="Animation_nrmjy"]
resource_name = "melee"
length = 0.8
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("GunMesh:position")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.133333, 0.7),
"transitions": PackedFloat32Array(1, 1, 1),
"update": 0,
"values": [Vector3(0, 0, -0.189222), Vector3(-0.129361, 0, -0.39721), Vector3(0, 0, -0.189)]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("GunMesh:rotation")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0, 0.133333, 0.7),
"transitions": PackedFloat32Array(1, 1, 1),
"update": 0,
"values": [Vector3(0, 0, 0), Vector3(-0.188198, 2.24793, -0.149287), Vector3(0, 0, 0)]
}

[sub_resource type="Animation" id="Animation_danae"]
resource_name = "reload"
length = 1.7
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("GunMesh:position")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.4, 0.68, 0.85, 1.12, 1.39, 1.7),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1, 1, 1),
"update": 0,
"values": [Vector3(0, 0, -0.189), Vector3(0, 0.087, -0.128), Vector3(0, 0.125, -0.157), Vector3(0, 0.125, -0.157), Vector3(0, 0.006, -0.157), Vector3(0, 0.172, -0.157), Vector3(0, 0, -0.189)]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("GunMesh:rotation")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0, 0.4, 0.68, 0.85, 0.966667, 1.06667, 1.16667, 1.23333, 1.33333, 1.43333, 1.53333, 1.7),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1),
"update": 0,
"values": [Vector3(0, 0, 0), Vector3(0.977384, 0, 0), Vector3(1.07512, 0, 0), Vector3(1.07512, 0, 0), Vector3(1.5708, 0, 0), Vector3(1.5708, 2.44346, 0), Vector3(1.5708, 4.88692, 0), Vector3(1.5708, 6.28319, 0), Vector3(1.5708, 8.37758, 0), Vector3(1.5708, 10.472, 0), Vector3(1.5708, 12.5664, 0), Vector3(0, 12.5664, 0)]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_7ybdq"]
_data = {
&"RESET": SubResource("Animation_7ybdq"),
&"melee": SubResource("Animation_nrmjy"),
&"reload": SubResource("Animation_danae")
}

[sub_resource type="Animation" id="Animation_l3s4n"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("GunMesh:position")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector3(0, 0, -0.189222)]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("GunMesh:rotation")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector3(0, 0, 0)]
}

[sub_resource type="Animation" id="Animation_idm4r"]
resource_name = "fire"
length = 0.1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("GunMesh:position")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.0399663, 0.1),
"transitions": PackedFloat32Array(1, 1, 1),
"update": 0,
"values": [Vector3(0, 0, -0.189222), Vector3(0, 0, -0.2), Vector3(0, 0, -0.189222)]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("GunMesh:rotation")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0, 0.0399663, 0.1),
"transitions": PackedFloat32Array(1, 1, 1),
"update": 0,
"values": [Vector3(0, 0, 0), Vector3(0.0523599, 0, 0), Vector3(0, 0, 0)]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_k4mro"]
_data = {
&"RESET": SubResource("Animation_l3s4n"),
&"fire": SubResource("Animation_idm4r")
}

[node name="Gun" type="Node3D"]
script = ExtResource("1_danae")

[node name="FireTimer" type="Timer" parent="."]

[node name="Animations" type="AnimationPlayer" parent="."]
libraries = {
&"": SubResource("AnimationLibrary_7ybdq")
}

[node name="FireAudio" type="AudioStreamPlayer" parent="."]
stream = ExtResource("2_sqgpk")
volume_db = -30.0
max_polyphony = 2
script = ExtResource("3_40bau")

[node name="HitAudio" type="AudioStreamPlayer" parent="."]
stream = ExtResource("4_7ybdq")
volume_db = -18.0
max_polyphony = 4

[node name="ReloadBeganAudio" type="AudioStreamPlayer" parent="."]
stream = ExtResource("5_sqgpk")
volume_db = -10.0
script = ExtResource("6_sqgpk")
min_pitch = 0.9
max_pitch = 1.1

[node name="ReloadEndedAudio" type="AudioStreamPlayer" parent="."]
stream = ExtResource("7_ae13x")
volume_db = -10.0
script = ExtResource("6_sqgpk")
min_pitch = 0.95
max_pitch = 1.05

[node name="GunMesh" parent="." instance=ExtResource("5_idm4r")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -0.189222)

[node name="BulletSpawner" type="Node3D" parent="GunMesh"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -3.08448e-08, 0, -0.222181)

[node name="FirePlayer" type="AnimationPlayer" parent="."]
libraries = {
&"": SubResource("AnimationLibrary_k4mro")
}

[connection signal="fired" from="." to="FireAudio" method="_on_gun_fired"]
[connection signal="timeout" from="FireTimer" to="." method="_on_timer_timeout"]
[connection signal="animation_finished" from="Animations" to="." method="_on_animations_animation_finished"]
